const { v4: uuidv4 } = require("uuid");

describe("P치gina de usu치rio", () => {
  beforeEach(() => {
    cy.visit("http://localhost:3000/");
  });

  it("Cadastrando um novo usu치rio existente ", () => {
    const email = `${uuidv4()}@gmail.com`;
    const password = uuidv4();
    cy.intercept({
      method: "POST",
      url: "/",
      hostname: "localhost"
    }).as("routerPost")
    cy.registrarBytebank(email, password);
    cy.wait("@routerPost").its("response.statusCode").should("eq", 201)
    cy.registrarBytebank(email, password);
    cy.get('[data-test="mensagem-erro"]')
    .contains("E-mail j치 cadastrado!")
    .should("be.visible")
    cy.wait("@routerPost").its("response.statusCode").should("eq", 401)
  });
});